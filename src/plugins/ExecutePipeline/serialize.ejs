-- Serialization functions for:<%= types.map(function(type) {return type[0];}).join('\n--   ') %>
require 'paths'

local serializer = {}

<% types.forEach(function(pair) {
var type = pair[0],
    fn = pair[1];
%>
function serializer.<%= type %> (name, data)
    local dir = paths.concat('outputs', name)
    os.execute('mkdir ' .. dir)
    <%= fn.replace('\n', '\n    ') %>
end
<% }); %>

return serializer
